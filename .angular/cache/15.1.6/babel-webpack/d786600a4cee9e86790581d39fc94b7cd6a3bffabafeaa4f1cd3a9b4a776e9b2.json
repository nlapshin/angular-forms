{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nfunction AppNgFormControlComponent_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppNgFormControlComponent_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Name must be at least 4 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppNgFormControlComponent_div_6_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Name cannot be Bob. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppNgFormControlComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, AppNgFormControlComponent_div_6_div_1_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(2, AppNgFormControlComponent_div_6_div_2_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(3, AppNgFormControlComponent_div_6_div_3_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r0 = i0.ɵɵreference(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r0.errors == null ? null : _r0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r0.errors == null ? null : _r0.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r0.errors == null ? null : _r0.errors[\"forbiddenName\"]);\n  }\n}\nfunction AppNgFormControlComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const comp_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", comp_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", comp_r7, \" \");\n  }\n}\nfunction AppNgFormControlComponent_li_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\"\", p_r8.title, \" (\", p_r8.company, \") - \", p_r8.price, \"\");\n  }\n}\nconst _c0 = function () {\n  return {\n    updateOn: \"blur\"\n  };\n};\nexport class Phone {\n  constructor(title, price, company) {\n    this.title = title;\n    this.price = price;\n    this.company = company;\n  }\n}\nexport class AppNgFormControlComponent {\n  constructor(formBuilder) {\n    this.formBuilder = formBuilder;\n    this.phones = [];\n    this.form = this.formBuilder.group({\n      title: ['', [Validators.required, Validators.minLength(4), this.forbiddenNameValidator('bob')]],\n      price: [null, Validators.required],\n      company: ['']\n    });\n  }\n  // Custom validator function for the 'title' field\n  forbiddenNameValidator(forbiddenName) {\n    return control => {\n      const forbidden = control.value === forbiddenName;\n      return forbidden ? {\n        'forbiddenName': {\n          value: control.value\n        }\n      } : null;\n    };\n  }\n  // Function to add a new phone to the list\n  addPhone() {\n    if (this.form.valid) {\n      const phone = {\n        title: this.form.get('title')?.value,\n        price: this.form.get('price')?.value,\n        company: this.form.get('company')?.value\n      };\n      this.phones.push(phone);\n    }\n  }\n}\nAppNgFormControlComponent.ɵfac = function AppNgFormControlComponent_Factory(t) {\n  return new (t || AppNgFormControlComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\nAppNgFormControlComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppNgFormControlComponent,\n  selectors: [[\"app-ng-form-control\"]],\n  decls: 24,\n  vars: 8,\n  consts: [[1, \"form-group\"], [\"name\", \"title\", \"appForbiddenName\", \"bob\", \"required\", \"\", \"minlength\", \"4\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"title\", \"ngModel\"], [\"class\", \"alert\", 4, \"ngIf\"], [\"type\", \"number\", \"name\", \"price\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"company\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-default\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [1, \"alert\"], [4, \"ngIf\"], [3, \"value\"]],\n  template: function AppNgFormControlComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"label\");\n      i0.ɵɵtext(3, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043C\\u043E\\u0434\\u0435\\u043B\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"input\", 1, 2);\n      i0.ɵɵlistener(\"ngModelChange\", function AppNgFormControlComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.form.title = $event;\n      })(\"ngModelChange\", function AppNgFormControlComponent_Template_input_ngModelChange_4_listener() {\n        return ctx.onTitleChange();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, AppNgFormControlComponent_div_6_Template, 4, 3, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 0)(8, \"label\");\n      i0.ɵɵtext(9, \"\\u0426\\u0435\\u043D\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function AppNgFormControlComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.form.price = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 0)(12, \"label\");\n      i0.ɵɵtext(13, \"\\u041F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"select\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function AppNgFormControlComponent_Template_select_ngModelChange_14_listener($event) {\n        return ctx.form.company = $event;\n      });\n      i0.ɵɵtemplate(15, AppNgFormControlComponent_option_15_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 0)(17, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function AppNgFormControlComponent_Template_button_click_17_listener() {\n        return ctx.addPhone();\n      });\n      i0.ɵɵtext(18, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"div\")(20, \"h3\");\n      i0.ɵɵtext(21, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0435 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u044B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"ul\");\n      i0.ɵɵtemplate(23, AppNgFormControlComponent_li_23_Template, 2, 3, \"li\", 8);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(5);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.form.title)(\"ngModelOptions\", i0.ɵɵpureFunction0(7, _c0));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r0.invalid && (_r0.dirty || _r0.touched));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.form.price);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.form.company);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.companies);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.phones);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.RequiredValidator, i1.MinLengthValidator, i1.NgModel],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","Phone","constructor","title","price","company","AppNgFormControlComponent","formBuilder","form","group","required","minLength","forbiddenNameValidator","forbiddenName","control","forbidden","value","addPhone","valid","phone","get","phones","push","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/nik/projects/webinar/angular-forms/src/app/components/ngFormControl.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\n\nexport class Phone{\n  constructor(public title: string, \n              public price: number, \n              public company: string)\n  { }\n}\n\nexport interface IForm {\n  title: string;\n  price: number;\n  company: string;\n}\n\n@Component({\n  selector: 'app-ng-form-control',\n  template: `\n    <div> \n        <div class=\"form-group\">\n            <label>Название модели</label>\n            <input class=\"form-control\" name=\"title\" [(ngModel)]=\"form.title\" [ngModelOptions]=\"{ updateOn: 'blur' }\" #title=\"ngModel\" appForbiddenName=\"bob\" (ngModelChange)=\"onTitleChange()\" required minlength=\"4\" />\n            <div *ngIf=\"title.invalid && (title.dirty || title.touched)\"\n              class=\"alert\">\n\n            <div *ngIf=\"title.errors?.['required']\">\n              Name is required.\n            </div>\n            <div *ngIf=\"title.errors?.['minlength']\">\n              Name must be at least 4 characters long.\n            </div>\n            <div *ngIf=\"title.errors?.['forbiddenName']\">\n              Name cannot be Bob.\n            </div>\n\n          </div>      \n\n          </div>\n        <div class=\"form-group\">\n            <label>Цена</label>\n            <input type=\"number\" class=\"form-control\" name=\"price\" [(ngModel)]=\"form.price\" />\n        </div>\n        <div class=\"form-group\">\n            <label>Производитель</label>\n            <select class=\"form-control\" name=\"company\" [(ngModel)]=\"form.company\">\n                <option  *ngFor=\"let comp of companies\" [value]=\"comp\">\n                    {{comp}}\n                </option>\n            </select>\n        </div>\n        <div class=\"form-group\">\n            <button class=\"btn btn-default\" (click)=\"addPhone()\">Добавить</button>\n        </div>\n  </div>\n  <div><h3>Добавленные элементы</h3>\n        <ul>\n            <li *ngFor=\"let p of phones\">{{p.title}} ({{p.company}}) - {{p.price}}</li>\n        </ul>\n  </div>\n  `\n})\nexport class AppNgFormControlComponent {\n    form: FormGroup;\n    phones: Phone[] = [];\n\n  constructor(private formBuilder: FormBuilder) {\n    this.form = this.formBuilder.group({\n      title: ['', [Validators.required, Validators.minLength(4), this.forbiddenNameValidator('bob')]],\n      price: [null, Validators.required],\n      company: [''],\n    });\n  }\n\n  // Custom validator function for the 'title' field\n  forbiddenNameValidator(forbiddenName: string) {\n    return (control: FormControl) => {\n      const forbidden = control.value === forbiddenName;\n      return forbidden ? { 'forbiddenName': { value: control.value } } : null;\n    };\n  }\n\n  // Function to add a new phone to the list\n  addPhone() {\n    if (this.form.valid) {\n      const phone = {\n        title: this.form.get('title')?.value,\n        price: this.form.get('price')?.value,\n        company: this.form.get('company')?.value,\n      };\n      this.phones.push(phone);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}